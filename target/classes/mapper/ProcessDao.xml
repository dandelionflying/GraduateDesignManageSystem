<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.running4light.gdms.dao.ProcessDao">
  <resultMap id="BaseResultMap" type="com.running4light.gdms.pojo.Process">
  <id column="ID" jdbcType="SMALLINT" property="id" />
    <result column="S_ID" jdbcType="VARCHAR" property="sId" />
    <result column="TASK_BOOK" jdbcType="SMALLINT" property="taskBook" />
    <result column="OPENNING_REPORT" jdbcType="SMALLINT" property="openningReport" />
    <result column="MID_TERM_CHECK" jdbcType="SMALLINT" property="midTermCheck" />
    <result column="PAPER" jdbcType="SMALLINT" property="paper" />
    <result column="EVALUATION1" jdbcType="SMALLINT" property="evaluation1" />
    <result column="EVALUATION2" jdbcType="SMALLINT" property="evaluation2" />
    <result column="CHECK_REPETITION" jdbcType="SMALLINT" property="checkRepetition" />
    <result column="ANSWER_APPLICATION" jdbcType="SMALLINT" property="answerApplication" />
    <result column="ANSWER_RECORD" jdbcType="SMALLINT" property="answerRecord" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Short">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from process
    where ID = #{id,jdbcType=SMALLINT}
  </delete>
  <insert id="insert" parameterType="com.running4light.gdms.pojo.Process">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Short">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into process (S_ID, TASK_BOOK, OPENNING_REPORT, 
      MID_TERM_CHECK, PAPER, EVALUATION1, 
      EVALUATION2, CHECK_REPETITION, ANSWER_APPLICATION, 
      ANSWER_RECORD)
    values (#{sId,jdbcType=VARCHAR}, #{taskBook,jdbcType=SMALLINT}, #{openningReport,jdbcType=SMALLINT}, 
      #{midTermCheck,jdbcType=SMALLINT}, #{paper,jdbcType=SMALLINT}, #{evaluation1,jdbcType=SMALLINT}, 
      #{evaluation2,jdbcType=SMALLINT}, #{checkRepetition,jdbcType=SMALLINT}, #{answerApplication,jdbcType=SMALLINT}, 
      #{answerRecord,jdbcType=SMALLINT})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.running4light.gdms.pojo.Process">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update process
    set S_ID = #{sId,jdbcType=VARCHAR},
      TASK_BOOK = #{taskBook,jdbcType=SMALLINT},
      OPENNING_REPORT = #{openningReport,jdbcType=SMALLINT},
      MID_TERM_CHECK = #{midTermCheck,jdbcType=SMALLINT},
      PAPER = #{paper,jdbcType=SMALLINT},
      EVALUATION1 = #{evaluation1,jdbcType=SMALLINT},
      EVALUATION2 = #{evaluation2,jdbcType=SMALLINT},
      CHECK_REPETITION = #{checkRepetition,jdbcType=SMALLINT},
      ANSWER_APPLICATION = #{answerApplication,jdbcType=SMALLINT},
      ANSWER_RECORD = #{answerRecord,jdbcType=SMALLINT}
    where ID = #{id,jdbcType=SMALLINT}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Short" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select ID, S_ID, TASK_BOOK, OPENNING_REPORT, MID_TERM_CHECK, PAPER, EVALUATION1, 
    EVALUATION2, CHECK_REPETITION, ANSWER_APPLICATION, ANSWER_RECORD
    from process
    where ID = #{id,jdbcType=SMALLINT}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select ID, S_ID, TASK_BOOK, OPENNING_REPORT, MID_TERM_CHECK, PAPER, EVALUATION1, 
    EVALUATION2, CHECK_REPETITION, ANSWER_APPLICATION, ANSWER_RECORD
    from process
  </select>
  <select id="selectByTeacher" parameterType="string" resultMap="BaseResultMap">
      select * from process where s_id in (select s_id from st where teacher_name = #{teacherName});
  </select>
  <update id="updateState" parameterType="map">
      update process
      <set>
          <if test="TASK_BOOK!=null">
              TASK_BOOK = #{TASK_BOOK},
          </if>
          <if test="OPENNING_REPORT!=null">
              OPENNING_REPORT = #{OPENNING_REPORT},
          </if>
          <if test="MID_TERM_CHECK!=null">
              MID_TERM_CHECK = #{MID_TERM_CHECK},
          </if>
          <if test="PAPER!=null">
              PAPER = #{PAPER},
          </if>
          <if test="EVALUATION1!=null">
              EVALUATION1 = #{EVALUATION1},
          </if>
          <if test="EVALUATION2!=null">
              EVALUATION2 = #{EVALUATION2},
          </if>
          <if test="CHECK_REPETITION!=null">
              CHECK_REPETITION = #{CHECK_REPETITION},
          </if>
          <if test="ANSWER_APPLICATION!=null">
              ANSWER_APPLICATION = #{ANSWER_APPLICATION},
          </if>
          <if test="ANSWER_RECORD!=null">
              ANSWER_RECORD = #{ANSWER_RECORD},
          </if>
      </set>
      where s_id = #{uid}
  </update>
  <select id="queryByUid" parameterType="java.lang.String" resultMap="BaseResultMap">
      select * from process where s_id = #{uid}
  </select>
</mapper>